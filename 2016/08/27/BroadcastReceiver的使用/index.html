<!DOCTYPE html>
<html style="display: none;" lang="zh">
    <head>
    <meta charset="utf-8">
    <!--
        © Material Theme
        https://github.com/viosey/hexo-theme-material
        Version: 1.4.0 -->
    <script>window.materialVersion = "1.4.0"</script>

    <!-- Title -->
    
    <title>
        
            BroadcastReceiver的使用 | 
        
        星家|不会搬砖的码农
    </title>

    <!-- dns prefetch -->
    <meta http-equiv="x-dns-prefetch-control" content="on">
    
    
    
    
    
    
    
        <link rel="dns-prefetch" href="https://busuanzi.ibruce.info"/>
    
    
    
    

    <!-- Meta & Info -->
    <meta http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="theme-color" content="#0097A7">
    <meta name="author" content="罗炜光">
    <meta name="description" itemprop="description" content="广播的分类
普通广播
有序广播
粘性广播
本地广播
定向广播
">
    <meta name="keywords" content="null,Android,Android基础">

    <!-- Site Verification -->
    
    <meta name="baidu-site-verification" content="9KipFitrC9" />

    <!-- Favicons -->
    <link rel="icon shortcut" type="image/ico" href="/img/favicons.pngg">
    <link rel="icon" sizes="192x192" href="/img/favicons.png">
    <link rel="apple-touch-icon" href="/img/favicons.png">

    <!--iOS -->
    <meta name="apple-mobile-web-app-title" content="Title">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="HandheldFriendly" content="True">
    <meta name="MobileOptimized" content="480">

    <!-- Add to homescreen for Chrome on Android -->
    <meta name="mobile-web-app-capable" content="yes">

    <!-- Add to homescreen for Safari on iOS -->
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="apple-mobile-web-app-title" content="星家|不会搬砖的码农">

    <!-- The Open Graph protocol -->
    <meta property="og:url" content="https://luoweiguang.github.io">
    <meta property="og:type" content="blog">
    <meta property="og:title" content="BroadcastReceiver的使用 | 星家|不会搬砖的码农">
    <meta property="og:image" content="/img/favicons.png" />
    <meta property="og:description" content="广播的分类
普通广播
有序广播
粘性广播
本地广播
定向广播
">
    <meta property="og:article:tag" content="Android"> <meta property="og:article:tag" content="Android基础"> 

    
        <meta property="article:published_time" content="Sat Aug 27 2016 22:00:00 GMT+0800" />
        <meta property="article:modified_time" content="Wed Nov 15 2017 01:28:33 GMT+0800" />
    

    <!-- The Twitter Card protocol -->
    <meta name="twitter:title" content="BroadcastReceiver的使用 | 星家|不会搬砖的码农">
    <meta name="twitter:description" content="广播的分类
普通广播
有序广播
粘性广播
本地广播
定向广播
">
    <meta name="twitter:image" content="/img/favicons.png">
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:url" content="https://luoweiguang.github.io" />

    <!-- Add canonical link for SEO -->
    
        <link rel="canonical" href="https://luoweiguang.github.io/2016/08/27/BroadcastReceiver的使用/index.html" />
    

    <!-- Structured-data for SEO -->
    
        


<script type="application/ld+json">
{
    "@context": "https://schema.org",
    "@type": "Article",
    "publisher": {
        "@type": "Organization",
        "name": "星家|不会搬砖的码农",
        "logo": "/img/favicons.png"
    },
    "author": {
        "@type": "Person",
        "name": "罗炜光",
        "image": {
            "@type": "ImageObject",
            "url": "/img/favicons.png"
        },
        "description": "Hi, nice to meet you"
    },
    "headline": "BroadcastReceiver的使用",
    "url": "https://luoweiguang.github.io/2016/08/27/BroadcastReceiver的使用/index.html",
    "datePublished": "Sat Aug 27 2016 22:00:00 GMT+0800",
    "dateModified": "Wed Nov 15 2017 01:28:33 GMT+0800",
    "description": "广播的分类
普通广播
有序广播
粘性广播
本地广播
定向广播
",
    "mainEntityOfPage": {
        "@type": "WebPage",
        "@id": "https://luoweiguang.github.io"
    }
}
</script>


    

    <!--[if lte IE 9]>
        <link rel="stylesheet" href="/css/ie-blocker.css">

        
            <script src="/js/ie-blocker.zhCN.js"></script>
        
    <![endif]-->

    <!-- Import lsloader -->
    <script>(function(){window.lsloader={jsRunSequence:[],jsnamemap:{},cssnamemap:{}};lsloader.removeLS=function(key){try{localStorage.removeItem(key)}catch(e){}};lsloader.setLS=function(key,val){try{localStorage.setItem(key,val)}catch(e){}};lsloader.getLS=function(key){var val="";try{val=localStorage.getItem(key)}catch(e){val=""}return val};versionString="/*"+materialVersion+"*/";lsloader.clean=function(){try{var keys=[];for(var i=0;i<localStorage.length;i++){keys.push(localStorage.key(i))}keys.forEach(function(key){var data=lsloader.getLS(key);if(data&&data.indexOf(versionString)===-1){lsloader.removeLS(key)}})}catch(e){}};lsloader.clean();lsloader.load=function(jsname,jspath,cssonload){cssonload=cssonload||function(){};var code;code=this.getLS(jsname);if(code&&code.indexOf(versionString)===-1){this.removeLS(jsname);this.requestResource(jsname,jspath,cssonload);return}if(code){var versionNumber=code.split(versionString)[0];if(versionNumber!=jspath){console.log("reload:"+jspath);this.removeLS(jsname);this.requestResource(jsname,jspath,cssonload);return}code=code.split(versionString)[1];if(/\.js?.+$/.test(versionNumber)){this.jsRunSequence.push({name:jsname,code:code});this.runjs(jspath,jsname,code)}else{document.getElementById(jsname).appendChild(document.createTextNode(code));cssonload()}}else{this.requestResource(jsname,jspath,cssonload)}};lsloader.requestResource=function(name,path,cssonload){var that=this;if(/\.js?.+$/.test(path)){this.iojs(path,name,function(path,name,code){that.setLS(name,path+versionString+code);that.runjs(path,name,code)})}else if(/\.css?.+$/.test(path)){this.iocss(path,name,function(code){document.getElementById(name).appendChild(document.createTextNode(code));that.setLS(name,path+versionString+code)},cssonload)}};lsloader.iojs=function(path,jsname,callback){var that=this;that.jsRunSequence.push({name:jsname,code:""});try{var xhr=new XMLHttpRequest;xhr.open("get",path,true);xhr.onreadystatechange=function(){if(xhr.readyState==4){if(xhr.status>=200&&xhr.status<300||xhr.status==304){if(xhr.response!=""){callback(path,jsname,xhr.response);return}}that.jsfallback(path,jsname)}};xhr.send(null)}catch(e){that.jsfallback(path,jsname)}};lsloader.iocss=function(path,jsname,callback,cssonload){var that=this;try{var xhr=new XMLHttpRequest;xhr.open("get",path,true);xhr.onreadystatechange=function(){if(xhr.readyState==4){if(xhr.status>=200&&xhr.status<300||xhr.status==304){if(xhr.response!=""){callback(xhr.response);cssonload();return}}that.cssfallback(path,jsname,cssonload)}};xhr.send(null)}catch(e){that.cssfallback(path,jsname,cssonload)}};lsloader.iofonts=function(path,jsname,callback,cssonload){var that=this;try{var xhr=new XMLHttpRequest;xhr.open("get",path,true);xhr.onreadystatechange=function(){if(xhr.readyState==4){if(xhr.status>=200&&xhr.status<300||xhr.status==304){if(xhr.response!=""){callback(xhr.response);cssonload();return}}that.cssfallback(path,jsname,cssonload)}};xhr.send(null)}catch(e){that.cssfallback(path,jsname,cssonload)}};lsloader.runjs=function(path,name,code){if(!!name&&!!code){for(var k in this.jsRunSequence){if(this.jsRunSequence[k].name==name){this.jsRunSequence[k].code=code}}}if(!!this.jsRunSequence[0]&&!!this.jsRunSequence[0].code&&this.jsRunSequence[0].status!="failed"){var script=document.createElement("script");script.appendChild(document.createTextNode(this.jsRunSequence[0].code));script.type="text/javascript";document.getElementsByTagName("head")[0].appendChild(script);this.jsRunSequence.shift();if(this.jsRunSequence.length>0){this.runjs()}}else if(!!this.jsRunSequence[0]&&this.jsRunSequence[0].status=="failed"){var that=this;var script=document.createElement("script");script.src=this.jsRunSequence[0].path;script.type="text/javascript";this.jsRunSequence[0].status="loading";script.onload=function(){that.jsRunSequence.shift();if(that.jsRunSequence.length>0){that.runjs()}};document.body.appendChild(script)}};lsloader.tagLoad=function(path,name){this.jsRunSequence.push({name:name,code:"",path:path,status:"failed"});this.runjs()};lsloader.jsfallback=function(path,name){if(!!this.jsnamemap[name]){return}else{this.jsnamemap[name]=name}for(var k in this.jsRunSequence){if(this.jsRunSequence[k].name==name){this.jsRunSequence[k].code="";this.jsRunSequence[k].status="failed";this.jsRunSequence[k].path=path}}this.runjs()};lsloader.cssfallback=function(path,name,cssonload){if(!!this.cssnamemap[name]){return}else{this.cssnamemap[name]=1}var link=document.createElement("link");link.type="text/css";link.href=path;link.rel="stylesheet";link.onload=link.onerror=cssonload;var root=document.getElementsByTagName("script")[0];root.parentNode.insertBefore(link,root)};lsloader.runInlineScript=function(scriptId,codeId){var code=document.getElementById(codeId).innerText;this.jsRunSequence.push({name:scriptId,code:code});this.runjs()};lsloader.loadCombo=function(jslist){var updateList="";var requestingModules={};for(var k in jslist){var LS=this.getLS(jslist[k].name);if(!!LS){var version=LS.split(versionString)[0];var code=LS.split(versionString)[1]}else{var version=""}if(version==jslist[k].path){this.jsRunSequence.push({name:jslist[k].name,code:code,path:jslist[k].path})}else{this.jsRunSequence.push({name:jslist[k].name,code:null,path:jslist[k].path,status:"comboloading"});requestingModules[jslist[k].name]=true;updateList+=(updateList==""?"":";")+jslist[k].path}}var that=this;if(!!updateList){var xhr=new XMLHttpRequest;xhr.open("get",combo+updateList,true);xhr.onreadystatechange=function(){if(xhr.readyState==4){if(xhr.status>=200&&xhr.status<300||xhr.status==304){if(xhr.response!=""){that.runCombo(xhr.response,requestingModules);return}}else{for(var i in that.jsRunSequence){if(requestingModules[that.jsRunSequence[i].name]){that.jsRunSequence[i].status="failed"}}that.runjs()}}};xhr.send(null)}this.runjs()};lsloader.runCombo=function(comboCode,requestingModules){comboCode=comboCode.split("/*combojs*/");comboCode.shift();for(var k in this.jsRunSequence){if(!!requestingModules[this.jsRunSequence[k].name]&&!!comboCode[0]){this.jsRunSequence[k].status="comboJS";this.jsRunSequence[k].code=comboCode[0];this.setLS(this.jsRunSequence[k].name,this.jsRunSequence[k].path+versionString+comboCode[0]);comboCode.shift()}}this.runjs()}})();</script>

    <!-- Import CSS & jQuery -->
    
        <style id="css/material.min.css"></style><script>if(typeof window.lsLoadCSSMaxNums === "undefined")window.lsLoadCSSMaxNums = 0;window.lsLoadCSSMaxNums++;lsloader.load("css/material.min.css","/css/material.min.css?fJTiM/K1J3dWIruo3pxtAw==",function(){if(typeof window.lsLoadCSSNums === "undefined")window.lsLoadCSSNums = 0;window.lsLoadCSSNums++;if(window.lsLoadCSSNums == window.lsLoadCSSMaxNums)document.documentElement.style.display="";})</script>
        <style id="css/style.min.css"></style><script>if(typeof window.lsLoadCSSMaxNums === "undefined")window.lsLoadCSSMaxNums = 0;window.lsLoadCSSMaxNums++;lsloader.load("css/style.min.css","/css/style.min.css?oCSEO3ST+aEypEwttTDI9g==",function(){if(typeof window.lsLoadCSSNums === "undefined")window.lsLoadCSSNums = 0;window.lsLoadCSSNums++;if(window.lsLoadCSSNums == window.lsLoadCSSMaxNums)document.documentElement.style.display="";})</script>
        
        
            <style>
    
    
    
    
    
    
    
    .footer-sns-github {
        background-image: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI0OCIgaGVpZ2h0PSI0OCIgY2xhc3M9Imljb24iIHZpZXdCb3g9IjAgMCAxMDI0IDEwMjQiPjxwYXRoIGQ9Ik0xMzguNCA3OGMtNi40IDEuNC0yNi40IDE0LjItMzYgMjIuOC04IDcuMi0yMiAyOS44LTI0LjQgMzkuMi0xLjYgNi40LTIgMTEzLjItMS42IDM2OCAuNiAyOTkuNCAxIDM1OS44IDMuNCAzNjQgMTEgMjAuMiAyMS42IDMyLjQgMzcuMiA0MyAxNS42IDEwLjYgMTcuMiAxMS4yIDM0LjIgMTMuMiAxMC42IDEuMiA2My40IDEuNiAxMjcuNiAxLjRsMTA5LjYtLjYgNi02LjggNi4yLTYuOC0xLjItMjUuMmMtLjgtMTUuOC0uMi0zMy40IDEuNC00Ny4yIDMtMjUuNCAxLjQtMzYuMi02LTQzLjItNS00LjYtNi4yLTQuOC0zMC42LTQuMi0yNy42LjgtMjQgMS42LTY4LjgtMTYtOC42LTMuNC0yMi42LTE4LTI4LjQtMjkuOC0xMS40LTIyLjgtMjctNDUtMzkuMi01NS42LTE0LTEyLjItMTkuOC0yMC44LTE5LjgtMjguNiAwLTExLjYgMTMuNi0xMi42IDMzLjItMi40IDE2LjYgOC44IDIwLjggMTIuNCA0MC44IDM2LjIgMjQuMiAyOC42IDMxIDMzLjYgNTQgMzkuNiAxNS4yIDQgNDIuMiAzIDUxLjQtMS44IDktNC42IDE4LTE1LjIgMjQuNC0yOS4yIDExLjQtMjQuMiA3LjQtMzEuMi0yMC42LTM2LjgtOS44LTItMjkuMi04LTQzLjQtMTMuNC00MC40LTE1LjgtNjQuNi0zNy40LTg1LjQtNzYuMi0xMS42LTIxLjgtMTUuNC0zMy0xOC4yLTUzLjYtNC4yLTMyLjItNC44LTYwLjItMS40LTg0IDMuNC0yMy44IDYuOC0zMi44IDIwLjItNTQgNC02IDguOC0xNS42IDExLTIxLjQgMy44LTEwIDMuOC0xMS42IDEtMzAtNS4yLTM0LjItMy4yLTUyLjQgNy42LTcwLjIgNy4yLTEyLjIgMTUtMTcuMiAyNC4yLTE1LjggMTIuOCAyLjIgNTIgMTcuNCA2Ni44IDI2LjIgMjYgMTUgMjkgMTUuNCA4Mi40IDcuMiAyNC42LTMuOCAzMy44LTQuMiA2MC0zLjIgMTcgLjYgNDEuNCAzIDU0IDUuMiAzOC40IDYuNiA0OS42IDUuMiA3My0xMCA2LjYtNC4yIDE3LjQtOS40IDI0LTExLjYgNi42LTIuMiAxNi01LjggMjEtOC4yIDEzLTYgMjgtNS42IDM1LjYuOCAxMi40IDEwLjQgMTguNiA0MS40IDE0LjQgNzEuNi00LjQgMzAuNi0zIDM5LjQgOC40IDUzLjggMy40IDQuNCAxMS4yIDE5LjIgMTcuNCAzMy4yTDc3NSA0NDN2NzhsLTEwIDI4Yy0xNS4yIDQzLjItMzYuOCA3My4yLTY2LjIgOTIuOC0xMy40IDguOC01NyAyNS40LTc2LjggMjktMjguMiA1LjItMzMuMiAxMi42LTIyIDMyLjIgMTEuMiAxOS40IDEyLjQgMzIuOCAxMS42IDEyOS42bC0uNiA4NS44IDUuNCA0LjZjMy42IDMgOS4yIDUuMiAxNiA2IDUuOC44IDYwLjIgMSAxMjAuNi42IDEwOC40LS42IDExMC4yLS42IDExOS01IDI0LTExLjYgNDAtMjcuNCA1MS42LTUwLjZsNS40LTExIC42LTM0N2MuNC0yMjMtLjItMzUzLjQtMS40LTM2NS0yLTE3LTIuNi0xOC42LTEzLTM0LTEwLjYtMTUuNC0yMi44LTI2LjItNDMuMi0zNy4yLTQuMi0yLjQtNjQuNi0yLjgtMzY2LTMuMi0xOTguNiAwLTM2NCAuNC0zNjcuNiAxLjR6Ii8+PC9zdmc+);
    }
    
    
    
    
    
</style>

        
        <!-- Config CSS -->

<!-- Other Styles -->
<style>
  body, html {
    font-family: Roboto, "Helvetica Neue", Helvetica, "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei", "微软雅黑", Arial, sans-serif;
  }

  a {
    color: #00838F;
  }

  .mdl-card__media,
  #search-label,
  #search-form-label:after,
  #scheme-Paradox .hot_tags-count,
  #scheme-Paradox .sidebar_archives-count,
  #scheme-Paradox .sidebar-colored .sidebar-header,
  #scheme-Paradox .sidebar-colored .sidebar-badge{
    background-color: #0097A7 !important;
  }

  /* Sidebar User Drop Down Menu Text Color */
  #scheme-Paradox .sidebar-colored .sidebar-nav>.dropdown>.dropdown-menu>li>a:hover,
  #scheme-Paradox .sidebar-colored .sidebar-nav>.dropdown>.dropdown-menu>li>a:focus {
    color: #0097A7 !important;
  }

  #post_entry-right-info,
  .sidebar-colored .sidebar-nav li:hover > a,
  .sidebar-colored .sidebar-nav li:hover > a i,
  .sidebar-colored .sidebar-nav li > a:hover,
  .sidebar-colored .sidebar-nav li > a:hover i,
  .sidebar-colored .sidebar-nav li > a:focus i,
  .sidebar-colored .sidebar-nav > .open > a,
  .sidebar-colored .sidebar-nav > .open > a:hover,
  .sidebar-colored .sidebar-nav > .open > a:focus,
  #ds-reset #ds-ctx .ds-ctx-entry .ds-ctx-head a {
    color: #0097A7 !important;
  }

  .toTop {
    background: #757575 !important;
  }

  .material-layout .material-post>.material-nav,
  .material-layout .material-index>.material-nav,
  .material-nav a {
    color: #757575;
  }

  #scheme-Paradox .MD-burger-layer {
    background-color: #757575;
  }

  #scheme-Paradox #post-toc-trigger-btn {
    color: #757575;
  }

  .post-toc a:hover {
    color: #00838F;
    text-decoration: underline;
  }

</style>


<!-- Theme Background Related-->

    <style>
      body{
        background-color: #F5F5F5;
      }

      /* blog_info bottom background */
      #scheme-Paradox .material-layout .something-else .mdl-card__supporting-text{
        background-color: #fff;
      }
    </style>




<!-- Fade Effect -->

    <style>
      .fade {
        transition: all 800ms linear;
        -webkit-transform: translate3d(0,0,0);
        -moz-transform: translate3d(0,0,0);
        -ms-transform: translate3d(0,0,0);
        -o-transform: translate3d(0,0,0);
        transform: translate3d(0,0,0);
        opacity: 1;
      }

      .fade.out{
        opacity: 0;
      }
    </style>


<!-- Import Font -->

    <link href="https://fonts.googleapis.com/css?family=Roboto:300,400,500" rel="stylesheet">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons"rel="stylesheet">


        <script>lsloader.load("js/jquery.min.js","/js/jquery.min.js?qcusAULNeBksqffqUM2+Ig==")</script>
    
    
    <script>function Queue(){this.dataStore=[];this.offer=b;this.poll=d;this.execNext=a;this.debug=false;this.startDebug=c;function b(e){if(this.debug){console.log("Offered a Queued Function.")}if(typeof e==="function"){this.dataStore.push(e)}else{console.log("You must offer a function.")}}function d(){if(this.debug){console.log("Polled a Queued Function.")}return this.dataStore.shift()}function a(){var e=this.poll();if(e!==undefined){if(this.debug){console.log("Run a Queued Function.")}e()}}function c(){this.debug=true}}var queue=new Queue();</script>

    <!-- Analytics -->
    

    <!-- Custom Head -->
    
<link rel="stylesheet" href="/css/prism.css" type="text/css"></head>


    
        <body id="scheme-Paradox" class="lazy">
            <div class="material-layout  mdl-js-layout has-drawer is-upgraded">
                

                <!-- Main Container -->
                <main class="material-layout__content" id="main">

                    <!-- Top Anchor -->
                    <div id="top"></div>

                    
                        <!-- Hamburger Button -->
                        <button class="MD-burger-icon sidebar-toggle">
                            <span class="MD-burger-layer"></span>
                        </button>
                    

                    <!-- Post TOC -->

    
    <!-- Back Button -->
    <!--
    <div class="material-back" id="backhome-div" tabindex="0">
        <a class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon"
           href="#" onclick="window.history.back();return false;"
           target="_self"
           role="button"
           data-upgraded=",MaterialButton,MaterialRipple">
            <i class="material-icons" role="presentation">arrow_back</i>
            <span class="mdl-button__ripple-container">
                <span class="mdl-ripple"></span>
            </span>
        </a>
    </div>
    -->

    <!-- Left aligned menu below button -->
    <button id="post-toc-trigger-btn"
        class="mdl-button mdl-js-button mdl-button--icon">
        <i class="material-icons">format_list_numbered</i>
    </button>

    
    <ul class="post-toc-wrap mdl-menu mdl-menu--bottom-left mdl-js-menu mdl-js-ripple-effect" for="post-toc-trigger-btn" style="max-height:80vh; overflow-y:scroll;">
        <ol class="post-toc"><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#广播的分类"><span class="post-toc-number">1.</span> <span class="post-toc-text">广播的分类</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#广播接收者的注册"><span class="post-toc-number">2.</span> <span class="post-toc-text">广播接收者的注册</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#静态注册"><span class="post-toc-number">2.1.</span> <span class="post-toc-text">静态注册</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#启用和禁止广播接收器"><span class="post-toc-number">2.1.1.</span> <span class="post-toc-text">启用和禁止广播接收器</span></a></li></ol></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#动态注册"><span class="post-toc-number">2.2.</span> <span class="post-toc-text">动态注册</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#普通广播"><span class="post-toc-number">3.</span> <span class="post-toc-text">普通广播</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#有序广播"><span class="post-toc-number">4.</span> <span class="post-toc-text">有序广播</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#有序广播的优先级"><span class="post-toc-number">4.1.</span> <span class="post-toc-text">有序广播的优先级</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#粘性广播"><span class="post-toc-number">5.</span> <span class="post-toc-text">粘性广播</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#本地广播"><span class="post-toc-number">6.</span> <span class="post-toc-text">本地广播</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#定向广播"><span class="post-toc-number">7.</span> <span class="post-toc-text">定向广播</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#权限设置"><span class="post-toc-number">8.</span> <span class="post-toc-text">权限设置</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#自定义权限"><span class="post-toc-number">8.1.</span> <span class="post-toc-text">自定义权限</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#申明权限"><span class="post-toc-number">8.2.</span> <span class="post-toc-text">申明权限</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#发送权限"><span class="post-toc-number">8.3.</span> <span class="post-toc-text">发送权限</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#静态注册带权限的广播接受者"><span class="post-toc-number">8.4.</span> <span class="post-toc-text">静态注册带权限的广播接受者</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#动态注册带权限的广播接受者"><span class="post-toc-number">8.5.</span> <span class="post-toc-text">动态注册带权限的广播接受者</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#系统广播"><span class="post-toc-number">9.</span> <span class="post-toc-text">系统广播</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#无法收到系统广播"><span class="post-toc-number">9.1.</span> <span class="post-toc-text">无法收到系统广播</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#参考资料"><span class="post-toc-number">10.</span> <span class="post-toc-text">参考资料</span></a></li></ol>
        <!--
        <li class="mdl-menu__item">
            Some Action
        </li>
        -->
    </ul>
    





<!-- Layouts -->

    <!-- Post Module -->
    <div class="material-post_container">

        <div class="material-post mdl-grid">
            <div class="mdl-card mdl-shadow--4dp mdl-cell mdl-cell--12-col">

                <!-- Post Header(Thumbnail & Title) -->
                
    <!-- Paradox Post Header -->
    
        <!-- Custom Thumbnail -->
        <div class="post_thumbnail-custom mdl-card__media mdl-color-text--grey-50" style="background-image:url(/img/20160827999999.png)">
    
            <p class="article-headline-p">
                BroadcastReceiver的使用
            </p>
        </div>





                
                    <!-- Paradox Post Info -->
                    <div class="mdl-color-text--grey-700 mdl-card__supporting-text meta">

    <!-- Author Avatar -->
    <div id="author-avatar">
        <img src="/img/head.jpg" width="44px" height="44px" alt="Author Avatar"/>
    </div>
    <!-- Author Name & Date -->
    <div>
        <strong>罗炜光</strong>
        <span>8月 27, 2016</span>
    </div>

    <div class="section-spacer"></div>

    <!-- Favorite -->
    <!--
        <button id="article-functions-like-button" class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon btn-like">
            <i class="material-icons" role="presentation">favorite</i>
            <span class="visuallyhidden">favorites</span>
        </button>
    -->

    <!-- Qrcode -->
    
        <button id="article-functions-qrcode-button" class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon">
    <i class="material-icons" role="presentation">devices other</i>
    <span class="visuallyhidden">devices other</span>
</button>
<ul class="mdl-menu mdl-menu--bottom-right mdl-js-menu mdl-js-ripple-effect" for="article-functions-qrcode-button">
    <li class="mdl-menu__item">在其它设备中阅读本文章</li>
    
        <img src="https://pan.baidu.com/share/qrcode?w=246&h=246&url=https://luoweiguang.github.io/2016/08/27/BroadcastReceiver的使用/">
    
</ul>
    

    <!-- Tags (bookmark) -->
    
    <button id="article-functions-viewtags-button" class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon">
        <i class="material-icons" role="presentation">bookmark</i>
        <span class="visuallyhidden">bookmark</span>
    </button>
    <ul class="mdl-menu mdl-menu--bottom-right mdl-js-menu mdl-js-ripple-effect" for="article-functions-viewtags-button">
        <li class="mdl-menu__item">
        <a class="post_tag-link" href="/tags/Android/">Android</a></li><li class="mdl-menu__item"><a class="post_tag-link" href="/tags/Android基础/">Android基础</a>
    </ul>
    

    <!-- Share -->
    <button id="article-fuctions-share-button" class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon">
    <i class="material-icons" role="presentation">share</i>
    <span class="visuallyhidden">share</span>
</button>
<ul class="mdl-menu mdl-menu--bottom-right mdl-js-menu mdl-js-ripple-effect" for="article-fuctions-share-button">
    

    
        
            <!-- Busuanzi Views -->
            <a class="post_share-link" href="#">
                <li class="mdl-menu__item">
                    <span id="busuanzi_container_page_pv">
                        <span id="busuanzi_value_page_pv"></span>&nbsp;浏览量
                    </span>
                </li>
            </a>
        
    

    <!-- Share Weibo -->
    
        <a class="post_share-link" href="http://service.weibo.com/share/share.php?appkey=&title=BroadcastReceiver的使用&url=https://luoweiguang.github.io/2016/08/27/BroadcastReceiver的使用/index.html&pic=&searchPic=false&style=simple" target="_blank">
            <li class="mdl-menu__item">
                分享到微博
            </li>
        </a>
    

    <!-- Share Twitter -->
    
        <a class="post_share-link" href="https://twitter.com/intent/tweet?text=BroadcastReceiver的使用&url=https://luoweiguang.github.io/2016/08/27/BroadcastReceiver的使用/index.html&via=罗炜光" target="_blank">
            <li class="mdl-menu__item">
                分享到 Twitter
            </li>
        </a>
    

    <!-- Share Facebook -->
    
        <a class="post_share-link" href="https://www.facebook.com/sharer/sharer.php?u=https://luoweiguang.github.io/2016/08/27/BroadcastReceiver的使用/index.html" target="_blank">
            <li class="mdl-menu__item">
                分享到 Facebook
            </li>
        </a>
    

    <!-- Share Google+ -->
    
        <a class="post_share-link" href="https://plus.google.com/share?url=https://luoweiguang.github.io/2016/08/27/BroadcastReceiver的使用/index.html" target="_blank">
            <li class="mdl-menu__item">
                分享到 Google+
            </li>
        </a>
    

    <!-- Share LinkedIn -->
    

    <!-- Share QQ -->
    

    <!-- Share Telegram -->
    
</ul>

</div>

                

                <!-- Post Content -->
                <div id="post-content" class="mdl-color-text--grey-700 mdl-card__supporting-text fade out">
    
        <h2 id="广播的分类"><a href="#广播的分类" class="headerlink" title="广播的分类"></a>广播的分类</h2><ul>
<li>普通广播</li>
<li>有序广播</li>
<li>粘性广播</li>
<li>本地广播</li>
<li>定向广播</li>
</ul>
<a id="more"></a>
<h2 id="广播接收者的注册"><a href="#广播接收者的注册" class="headerlink" title="广播接收者的注册"></a>广播接收者的注册</h2><h3 id="静态注册"><a href="#静态注册" class="headerlink" title="静态注册"></a>静态注册</h3><pre class=" language-xml"><code class="language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>receiver</span> <span class="token attr-name"><span class="token namespace">android:</span>name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>.MyBroadcastReceiver<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>intent-filter</span><span class="token punctuation">></span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>action</span>  <span class="token attr-name"><span class="token namespace">android:</span>name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>android.intent.action.BOOT_COMPLETED<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>action</span>  <span class="token attr-name"><span class="token namespace">android:</span>name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>android.net.conn.CONNECTIVITY_CHANGE<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>action</span>  <span class="token attr-name"><span class="token namespace">android:</span>name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>android.intent.action.BATTERY_CHANGED<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>intent-filter</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>receiver</span><span class="token punctuation">></span></span>
</code></pre>
<h4 id="启用和禁止广播接收器"><a href="#启用和禁止广播接收器" class="headerlink" title="启用和禁止广播接收器"></a>启用和禁止广播接收器</h4><pre class=" language-java"><code class="language-java"><span class="token comment" spellcheck="true">//启用广播接收器</span>
<span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">enableBroadcastReceiver</span><span class="token punctuation">(</span>Class<span class="token operator">&lt;</span><span class="token operator">?</span><span class="token operator">></span> cls<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    PackageManager packageManager <span class="token operator">=</span> <span class="token function">getPackageManager</span><span class="token punctuation">(</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
    packageManager<span class="token punctuation">.</span><span class="token function">setComponentEnabledSetting</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">ComponentName</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> cls<span class="token punctuation">)</span><span class="token punctuation">,</span>
                   PackageManager<span class="token punctuation">.</span>COMPONENT_ENABLED_STATE_ENABLED<span class="token punctuation">,</span>
                   PackageManager<span class="token punctuation">.</span>DONT_KILL_APP<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment" spellcheck="true">//禁止广播接收器</span>
<span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">disableBroadcastReceiver</span><span class="token punctuation">(</span>Class<span class="token operator">&lt;</span><span class="token operator">?</span><span class="token operator">></span> cls<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    PackageManager packageManager <span class="token operator">=</span> <span class="token function">getPackageManager</span><span class="token punctuation">(</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
    packageManager<span class="token punctuation">.</span><span class="token function">setComponentEnabledSetting</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">ComponentName</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> cls<span class="token punctuation">)</span><span class="token punctuation">,</span>
                   PackageManager<span class="token punctuation">.</span>COMPONENT_ENABLED_STATE_DISABLED<span class="token punctuation">,</span>
                   PackageManager<span class="token punctuation">.</span>DONT_KILL_APP<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
<h3 id="动态注册"><a href="#动态注册" class="headerlink" title="动态注册"></a>动态注册</h3><ul>
<li><strong>注册</strong><pre class=" language-java"><code class="language-java">MyBroadcastReceiver receiver <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MyBroadcastReceiver</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
IntentFilter filter <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">IntentFilter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
filter<span class="token punctuation">.</span><span class="token function">addAction</span><span class="token punctuation">(</span><span class="token string">"android.intent.action.TIME_TICK"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">registerReceiver</span><span class="token punctuation">(</span>receiver<span class="token punctuation">,</span> filter<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
</li>
<li><strong>解除注册</strong><pre class=" language-java"><code class="language-java"><span class="token function">unregisterReceiver</span><span class="token punctuation">(</span>receiver<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
</li>
</ul>
<p><strong>动态注册的广播接收器必须要组件销毁前进行解除注册</strong></p>
<h2 id="普通广播"><a href="#普通广播" class="headerlink" title="普通广播"></a>普通广播</h2><ul>
<li>普通广播是完全异步的</li>
<li>通过Context的<code>sendBroadcat()</code>函数来发送</li>
<li>消息传递的效率比较高，但是所有的receivers(接收器)的执行顺序不确定</li>
<li>接收者不能将处理结果传递给下一个接收者，并且无法终止广播Intent的传播</li>
</ul>
<h2 id="有序广播"><a href="#有序广播" class="headerlink" title="有序广播"></a>有序广播</h2><ul>
<li>有序广播通过Context的<code>sendOrderedBroadcast()</code>来发送</li>
<li>所有的广播接收器按照优先级依次执行，广播接收器的优先级通过receiver的intent-filter中的<code>android:priority</code>属性来设置，数值越大优先级越高。</li>
<li>当广播接收器接收的广播后，可以使用<code>setResult()</code>函数将结果传给下一个广播接收器接收，然后通过<code>getResult()</code>函数来取得上个广播接收器返回的结果，并可以用<code>abortBroadcast()</code>函数来让系统丢弃广播，使广播不再传送到别的广播接收器</li>
</ul>
<h3 id="有序广播的优先级"><a href="#有序广播的优先级" class="headerlink" title="有序广播的优先级"></a>有序广播的优先级</h3><ul>
<li>优先按<code>android:priority</code>来比较，数值越大则优先级越高，最大值为<code>2147483647</code>(即int型的最大值，而非官方文档的1000)</li>
<li>在<code>android:priority</code>相同的情况下，<code>动态注册</code>优先级高于<code>静态注册</code></li>
<li>在注册方式一样的情况下，<code>先注册</code>的优先级高于<code>后注册</code>的</li>
</ul>
<h2 id="粘性广播"><a href="#粘性广播" class="headerlink" title="粘性广播"></a>粘性广播</h2><ul>
<li><strong>API21</strong>上标记为过时</li>
<li>通过Context的<code>sendStickyBroadcast()</code>函数来发送。用此函数发送的广播会一直滞留，当有匹配此广播的广播接收器被注册后，该广播接收器就会收到此条广播。</li>
<li>sendStickyBroadcast只保留最后一条广播，并且一直保留下去，这样即使已经有广播接收器处理了该广播，当再有匹配的广播接收器被注册时，此广播仍会被接收。如果只想处理一遍该广播，可以通过<code>removeStickyBroadcast()</code>函数实现</li>
<li>使用此函数发送广播时，需要获得B权限<pre class=" language-xml"><code class="language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>users-permission</span> <span class="token attr-name"><span class="token namespace">android:</span>name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>android.permission.BROADCAST_STICKY<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>
</code></pre>
</li>
</ul>
<h2 id="本地广播"><a href="#本地广播" class="headerlink" title="本地广播"></a>本地广播</h2><ul>
<li>在21版的Support4包中新增本地广播，也就是<code>LocalBroadcastManager</code></li>
<li>只需要调用context的sendBroadcast、registerReceiver、unregisterReceiver的地方替换为LocalBroadcastManager getInstance(Context context)中对应的函数即可</li>
</ul>
<table>
<thead>
<tr>
<th>函数</th>
<th>作用</th>
</tr>
</thead>
<tbody>
<tr>
<td>LocalBroadcastManager.getInstance(context).registerReceiver(receiver,intentFilter)</td>
<td>注册receiver</td>
</tr>
<tr>
<td>LocalBroadcastManager.getInstance(context).unregisterReceiver(receiver)</td>
<td>注销receiver</td>
</tr>
<tr>
<td>LocalBroadcastManager.getInstance(context).sendBroadcast(new Intent(HELLO_ACTON))</td>
<td>发送异步广播</td>
</tr>
<tr>
<td>LocalBroadcastManager.getInstance(context).sendBroadcastSync(new Intent())</td>
<td>发送同步广播</td>
</tr>
</tbody>
</table>
<h2 id="定向广播"><a href="#定向广播" class="headerlink" title="定向广播"></a>定向广播</h2><ul>
<li>定向广播是普通广播的一个变体</li>
<li>定向广播使用了intent-filter的一个特性，通过在Intent中设置ComponentName来显示指定接收器</li>
</ul>
<pre class=" language-java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">sendDirectedBroadcast</span><span class="token punctuation">(</span>String packageName<span class="token punctuation">,</span>String className<span class="token punctuation">,</span>String action<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    Intent intent <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Intent</span><span class="token punctuation">(</span>action<span class="token punctuation">)</span><span class="token punctuation">;</span>
    intent<span class="token punctuation">.</span><span class="token function">setComponent</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">ComponentName</span><span class="token punctuation">(</span>packageName<span class="token punctuation">,</span>className<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">sendBroadcast</span><span class="token punctuation">(</span>intent<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
`
</code></pre>
<h2 id="权限设置"><a href="#权限设置" class="headerlink" title="权限设置"></a>权限设置</h2><h3 id="自定义权限"><a href="#自定义权限" class="headerlink" title="自定义权限"></a>自定义权限</h3><pre class=" language-xml"><code class="language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>permission</span> <span class="token attr-name"><span class="token namespace">android:</span>name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>com.android.permission.MYRECEIVER<span class="token punctuation">"</span></span>         <span class="token attr-name"><span class="token namespace">android:</span>protectionLevel</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>dangerous<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>  
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>permission</span><span class="token punctuation">></span></span>
</code></pre>
<h3 id="申明权限"><a href="#申明权限" class="headerlink" title="申明权限"></a>申明权限</h3><pre class=" language-xml"><code class="language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>uses-permission</span> <span class="token attr-name"><span class="token namespace">android:</span>name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>com.android.permission.MYRECEIVER<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>
</code></pre>
<h3 id="发送权限"><a href="#发送权限" class="headerlink" title="发送权限"></a>发送权限</h3><pre><code>sendBroadcast(intent, &quot;com.android.study.permission.MYRECEIVER&quot;);
</code></pre><h3 id="静态注册带权限的广播接受者"><a href="#静态注册带权限的广播接受者" class="headerlink" title="静态注册带权限的广播接受者"></a>静态注册带权限的广播接受者</h3><pre class=" language-xml"><code class="language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>receiver</span> <span class="token attr-name"><span class="token namespace">android:</span>name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>com.android.receiver.PermissionBroadcastReceiver<span class="token punctuation">"</span></span>  
     <span class="token attr-name"><span class="token namespace">android:</span>permission</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>com.android.permission.MYRECEIVER<span class="token punctuation">"</span></span><span class="token punctuation">></span></span> 
    ...  
 <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>receiver</span><span class="token punctuation">></span></span>
</code></pre>
<h3 id="动态注册带权限的广播接受者"><a href="#动态注册带权限的广播接受者" class="headerlink" title="动态注册带权限的广播接受者"></a>动态注册带权限的广播接受者</h3><pre class=" language-java"><code class="language-java">MyBroadcastReceiver receiver <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MyBroadcastReceiver</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
IntentFilter filter <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">IntentFilter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
filter<span class="token punctuation">.</span><span class="token function">addAction</span><span class="token punctuation">(</span><span class="token string">"android.intent.action.TIME_TICK"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">registerReceiver</span><span class="token punctuation">(</span>receiver<span class="token punctuation">,</span> filter<span class="token punctuation">,</span><span class="token string">"com.android.permission.MYRECEIVER"</span><span class="token punctuation">,</span>null<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<h2 id="系统广播"><a href="#系统广播" class="headerlink" title="系统广播"></a>系统广播</h2><ol>
<li><p>BATTERY_CHANGED_ACTION<br> 说明:充电状态，或者电池的电量发生变化。<br> action:”android.intent.action.BATTERY_CHANGED”</p>
</li>
<li><p>BOOT_COMPLETED_ACTION<br> 说明:在系统启动后，这个动作被广播一次（只有一次）。<br> action:”android.intent.action.BOOT_COMPLETED”</p>
</li>
<li><p>CALL_FORWARDING_STATE_CHANGED_ACTION<br> 说明:语音电话的呼叫转移状态已经改变。<br> action:”android.intent.action.CFF”</p>
</li>
<li><p>CONFIGURATION_CHANGED_ACTION<br> 说明:设备的配置信息已经改变<br> action:”android.intent.action.CONFIGURATION_CHANGED”</p>
</li>
<li><p>DATA_ACTIVITY_STATE_CHANGED_ACTION<br> 说明:电话的数据活动(data activity)状态（即收发数据的状态）已经改变。<br> action:”android.intent.action.DATA_ACTIVITY”</p>
</li>
<li><p>DATA_CONNECTION_STATE_CHANGED_ACTION<br> 说明:电话的数据连接状态已经改变。<br> action:”android.intent.action.DATA_STATE”</p>
</li>
<li><p>DATE_CHANGED_ACTION<br> 说明:日期被改变。<br> action:”android.intent.action.DATE_CHANGED”</p>
</li>
<li><p>FOTA_CANCEL_ACTION<br> 说明:取消所有被挂起的 (pending) 更新下载。<br> action:”android.server.checkin.FOTA_CANCEL”</p>
</li>
<li><p>FOTA_INSTALL_ACTION<br> 说明:更新已经被确认，马上就要开始安装。<br> action:”android.server.checkin.FOTA_INSTALL”</p>
</li>
<li><p>FOTA_READY_ACTION<br>说明:更新已经被下载，可以开始安装。<br>action:”android.server.checkin.FOTA_READY”</p>
</li>
<li><p>FOTA_RESTART_ACTION<br>说明:恢复已经停止的更新下载。<br>action:”android.server.checkin.FOTA_RESTART”</p>
</li>
<li><p>FOTA_UPDATE_ACTION<br>说明:通过 OTA 下载并安装操作系统更新。<br>action:”android.server.checkin.FOTA_UPDATE”</p>
</li>
<li><p>MEDIABUTTON_ACTION<br>说明:用户按下了“Media Button”。<br>action:”android.intent.action.MEDIABUTTON”</p>
</li>
<li><p>MEDIA_BAD_REMOVAL_ACTION<br>说明:扩展介质（扩展卡）已经从 SD 卡插槽拔出，但是挂载点 (mount point) 还没解除 (unmount)。<br>action:”android.intent.action.MEDIA_BAD_REMOVAL”</p>
</li>
<li><p>MEDIA_EJECT_ACTION<br>说明:用户想要移除扩展介质（拔掉扩展卡）。<br>action:”android.intent.action.MEDIA_EJECT”</p>
</li>
<li><p>MEDIA_MOUNTED_ACTION<br>说明:扩展介质被插入，而且已经被挂载。<br>action:”android.intent.action.MEDIA_MOUNTED”</p>
</li>
<li><p>MEDIA_REMOVED_ACTION<br>说明:扩展介质被移除。<br>action:”android.intent.action.MEDIA_REMOVED”</p>
</li>
<li><p>MEDIA_SCANNER_FINISHED_ACTION<br>说明:已经扫描完介质的一个目录。<br>action:”android.intent.action.MEDIA_SCANNER_FINISHED”</p>
</li>
<li><p>MEDIA_SCANNER_STARTED_ACTION<br>说明:开始扫描介质的一个目录。<br>action:”android.intent.action.MEDIA_SCANNER_STARTED”</p>
</li>
<li><p>MEDIA_SHARED_ACTION<br>说明:扩展介质的挂载被解除 (unmount)，因为它已经作为 USB 大容量存储被共享。<br>action:”android.intent.action.MEDIA_SHARED”</p>
</li>
<li><p>MEDIA_UNMOUNTED_ACTION<br>说明:扩展介质存在，但是还没有被挂载 (mount)。<br>action:”android.intent.action.MEDIA_UNMOUNTED”</p>
</li>
<li><p>MESSAGE_WAITING_STATE_CHANGED_ACTION<br>说明:电话的消息等待（语音邮件）状态已经改变。<br>action:”android.intent.action.MWI”</p>
</li>
<li><p>NETWORK_TICKLE_RECEIVED_ACTION<br>说明:设备收到了新的网络 “tickle” 通知。<br>action:”android.intent.action.NETWORK_TICKLE_RECEIVED”</p>
</li>
<li><p>PACKAGE_ADDED_ACTION<br>说明:设备上新安装了一个应用程序包。<br>action:”android.intent.action.PACKAGE_ADDED”</p>
</li>
<li><p>PACKAGE_REMOVED_ACTION<br>说明:设备上删除了一个应用程序包。<br>action:”android.intent.action.PACKAGE_REMOVED”</p>
</li>
<li><p>PHONE_STATE_CHANGED_ACTION<br>说明:电话状态已经改变。<br>action:”android.intent.action.PHONE_STATE”</p>
</li>
<li><p>PROVIDER_CHANGED_ACTION<br>说明:更新将要（真正）被安装。<br>action:”android.intent.action.PROVIDER_CHANGED”</p>
</li>
<li><p>PROVISIONING_CHECK_ACTION<br>说明:要求 polling of provisioning service 下载最新的设置。<br>action:”android.intent.action.PROVISIONING_CHECK”</p>
</li>
<li><p>SCREEN_OFF_ACTION<br>说明:屏幕被关闭。<br>action:”android.intent.action.SCREEN_OFF”</p>
</li>
<li><p>SCREEN_ON_ACTION<br>说明:屏幕已经被打开。<br>action:”android.intent.action.SCREEN_ON”</p>
</li>
<li><p>SERVICE_STATE_CHANGED_ACTION<br>说明:电话服务的状态已经改变。<br>action:”android.intent.action.SERVICE_STATE”</p>
</li>
<li><p>SIGNAL_STRENGTH_CHANGED_ACTION<br>说明:电话的信号强度已经改变。<br>action:”android.intent.action.SIG_STR”</p>
</li>
<li><p>STATISTICS_REPORT_ACTION<br>说明:要求 receivers 报告自己的统计信息。<br>action:”android.intent.action.STATISTICS_REPORT”</p>
</li>
<li><p>STATISTICS_STATE_CHANGED_ACTION<br>说明:统计信息服务的状态已经改变。<br>action:”android.intent.action.STATISTICS_STATE_CHANGED”</p>
</li>
<li><p>TIMEZONE_CHANGED_ACTION<br>说明:时区已经改变。<br>action:”android.intent.action.TIMEZONE_CHANGED”</p>
</li>
<li><p>TIME_CHANGED_ACTION<br>说明:时间已经改变（重新设置）。<br>action:”android.intent.action.TIME_SET”</p>
</li>
<li><p>TIME_TICK_ACTION<br>说明:当前时间已经变化（正常的时间流逝）。<br>action:”android.intent.action.TIME_TICK”</p>
</li>
<li><p>UMS_CONNECTED_ACTION<br>说明:设备进入 USB 大容量存储模式。<br>action:”android.intent.action.UMS_CONNECTED”</p>
</li>
<li><p>UMS_DISCONNECTED_ACTION<br>说明:设备从 USB 大容量存储模式退出。<br>action:”android.intent.action.UMS_DISCONNECTED”</p>
</li>
<li><p>WALLPAPER_CHANGED_ACTION<br>说明:系统的墙纸已经改变。<br>action:”android.intent.action.WALLPAPER_CHANGED”</p>
</li>
<li><p>XMPP_CONNECTED_ACTION<br>说明:XMPP 连接已经被建立。<br>action:”android.intent.action.XMPP_CONNECTED”</p>
</li>
<li><p>XMPP_DISCONNECTED_ACTION<br>说明:XMPP 连接已经被断开。<br>action:”android.intent.action.XMPP_DI说明:</p>
</li>
</ol>
<h3 id="无法收到系统广播"><a href="#无法收到系统广播" class="headerlink" title="无法收到系统广播"></a>无法收到系统广播</h3><ul>
<li>android3.1以后，首次安装未启动或者用户强制force stop后，应用无法监听到系统广播</li>
<li>在Android3.1以后版本添加了标志<code>FLAG_INCLUDE_STOPPED_PACKAGES</code>和<code>FLAG_EXCLUDE_STOPPED_PACKAGES</code>，用于区分发送广播时是否启动激活那些未启动过或者被用户<code>force stop</code>的应用组件。当两个Flag都不设置或都设置的时候，默认操作是<code>FLAG_INCLUDE_STOPPED_PACKAGES</code>。</li>
<li>系统向所有的Intent的广播添加了<code>FLAG_EXCLUDE_STOPPED_PACKAGES</code>标志。它这样做是为了防止广播无意中的或不必要地开启组件的stoppped应用程序的后台服务。这样可以优化系统性能，提高安全性。</li>
<li>用户给自定义的广播Intent添加<code>FLAG_INCLUDE_STOPPED_PACKAGES</code>，用于启动stop状态的应用组件。但是系统自带的广播intent，我们无能为力。</li>
<li>部分广播需要动态注册才有效，如时间变化等</li>
<li>部分广播需要设置addDataScheme，mediaScanner相关的需要设置<code>file</code>，package相关的需要设置<code>package</code>,.sms相关的需要设置<code>sms</code></li>
</ul>
<p><strong><a href="http://developer.android.com/about/versions/android-3.1.html#launchcontrols" target="_blank" rel="external">android官方API说明</a></strong></p>
<h2 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h2><p><a href="https://book.douban.com/subject/26744163/" target="_blank" rel="external">Android开发进阶从小工到专家</a><br><a href="http://www.cnblogs.com/albert1017/archive/2012/07/23/2605048.html" target="_blank" rel="external">BroadcastReceiver应用详解</a><br><a href="http://blog.csdn.net/huliang7777/article/details/8424787?utm_source=tuicool" target="_blank" rel="external">BroadcastReceiver中使用自定义Permission</a><br><a href="http://blog.csdn.net/ocean2006/article/details/40806819" target="_blank" rel="external">Android静态注册无法接受系统广播问题</a><br><a href="http://blog.csdn.net/pkxiuluo01/article/details/7388777" target="_blank" rel="external">android.intent.action大全</a><br><a href="http://blog.csdn.net/huangxiaohu_coder/article/details/7106014" target="_blank" rel="external">Android的BroadcastReciver收不到Broadcast（系统广播）的原因之一</a><br><a href="https://book.douban.com/subject/25911738/" target="_blank" rel="external">Android编程实战</a></p>

    

    
</div>


                

                <!-- Post Comments -->
                
                    
    <!-- 使用 DISQUS_CLICK -->
<div id="disqus-comment">
    <div id="disqus_thread"></div>

<!-- add animation -->
<style>
	.disqus_click_btn {
            line-height: 30px;
            margin: 0;
            min-width: 50px;
            padding: 0 14px;
            display: inline-block;
            font-family: "Roboto", "Helvetica", "Arial", sans-serif;
            font-size: 14px;
            font-weight: 400;
            text-transform: uppercase;
            letter-spacing: 0;
            overflow: hidden;
            will-change: box-shadow;
            transition: box-shadow .2s cubic-bezier(.4, 0, 1, 1), background-color .2s cubic-bezier(.4, 0, .2, 1), color .2s cubic-bezier(.4, 0, .2, 1);
            outline: 0;
            cursor: pointer;
            text-decoration: none;
            text-align: center;
            vertical-align: middle;
            border: 0;
            background: rgba(158, 158, 158, .2);
            box-shadow: 0 2px 2px 0 rgba(0, 0, 0, .14), 0 3px 1px -2px rgba(0, 0, 0, .2), 0 1px 5px 0 rgba(0, 0, 0, .12);
            color: #fff;
            background-color: #757575;
            text-shadow: 0
        }
</style>
	
<div class="btn_click_load"> 
    <button class="disqus_click_btn">阅读评论（请确保 disqus 可以正常加载）</button>
</div>

<script type="text/javascript">
    var disqus_config = function () {
        this.page.url = 'https://luoweiguang.github.io/2016/08/27/BroadcastReceiver的使用/';  // Replace PAGE_URL with your page's canonical URL variable
        this.page.identifier = 'https://luoweiguang.github.io/2016/08/27/BroadcastReceiver的使用/'; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
    };
</script>

<script type="text/ls-javascript" id="disqus-lazy-load-script">
    $('.btn_click_load').click(function() {  //click to load comments
        (function() { // DON'T EDIT BELOW THIS LINE
            var d = document;
            var s = d.createElement('script');
            s.src = '//https-luoweiguang-github-io.disqus.com/embed.js';
            s.setAttribute('data-timestamp', + new Date());
            (d.head || d.body).appendChild(s);
        })();
        $('.btn_click_load').css('display','none');
    });
</script>
  	

</div>
<style>
    #disqus-comment{
        background-color: #eee;
        padding: 2pc;
    }
</style>

                
            </div>

            <!-- Post Prev & Next Nav -->
            <nav class="material-nav mdl-color-text--grey-50 mdl-cell mdl-cell--12-col">
    <!-- Prev Nav -->
    
        <a href="/2016/09/08/Notification的使用/" id="post_nav-newer" class="prev-content">
            <button class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon mdl-color--white mdl-color-text--grey-900" role="presentation">
                <i class="material-icons">arrow_back</i>
            </button>
            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
            新篇
        </a>
    

    <!-- Section Spacer -->
    <div class="section-spacer"></div>

    <!-- Next Nav -->
    
        <a href="/2016/08/23/ContentProvider的使用/" id="post_nav-older" class="next-content">
            旧篇
            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
            <button class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon mdl-color--white mdl-color-text--grey-900" role="presentation">
                <i class="material-icons">arrow_forward</i>
            </button>
        </a>
    
</nav>

        </div>
    </div>



                    
                        <!-- Overlay For Active Sidebar -->
<div class="sidebar-overlay"></div>

<!-- Material sidebar -->
<aside id="sidebar" class="sidebar sidebar-colored sidebar-fixed-left" role="navigation">
    <div id="sidebar-main">
        <!-- Sidebar Header -->
        <div class="sidebar-header header-cover" style="background-image: url(/img/sidebar_header.png);">
    <!-- Top bar -->
    <div class="top-bar"></div>

    <!-- Sidebar toggle button -->
    <button type="button" class="sidebar-toggle mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon" style="display: initial;" data-upgraded=",MaterialButton,MaterialRipple">
        <i class="material-icons">clear_all</i>
        <span class="mdl-button__ripple-container">
            <span class="mdl-ripple">
            </span>
        </span>
    </button>

    <!-- Sidebar Avatar -->
    <div class="sidebar-image">
        <img src="/img/head.jpg" alt="罗炜光's avatar">
    </div>

    <!-- Sidebar Email -->
    <a data-toggle="dropdown" class="sidebar-brand" href="#settings-dropdown">
        luo_weiguang@foxmail.com
        <b class="caret"></b>
    </a>
</div>


        <!-- Sidebar Navigation  -->
        <ul class="nav sidebar-nav">
    <!-- User dropdown  -->
    <li class="dropdown">
        <ul id="settings-dropdown" class="dropdown-menu">
            
                <li>
                    <a href="http://mail.qq.com/cgi-bin/qm_share?t=qm_mailme&amp;email=luo_weiguang@foxmail.com" target="_blank" title="Email Me">
                        
                            <i class="material-icons sidebar-material-icons sidebar-indent-left1pc-element">email</i>
                        
                        Email Me
                    </a>
                </li>
            
        </ul>
    </li>

    <!-- Homepage -->
    
        <li id="sidebar-first-li">
            <a href="/">
                
                    <i class="material-icons sidebar-material-icons">home</i>
                
                主页
            </a>
        </li>
        
    

    <!-- Archives  -->
    
        <li class="dropdown">
            <a href="#" class="ripple-effect dropdown-toggle" data-toggle="dropdown">
                
                    <i class="material-icons sidebar-material-icons">inbox</i>
                
                    归档
                <b class="caret"></b>
            </a>
            <ul class="dropdown-menu">
            <li>
                <a class="sidebar_archives-link" href="/archives/2017/01/">一月 2017<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/archives/2016/12/">十二月 2016<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/archives/2016/10/">十月 2016<span class="sidebar_archives-count">3</span></a></li><li><a class="sidebar_archives-link" href="/archives/2016/09/">九月 2016<span class="sidebar_archives-count">8</span></a></li><li><a class="sidebar_archives-link" href="/archives/2016/08/">八月 2016<span class="sidebar_archives-count">7</span></a></li><li><a class="sidebar_archives-link" href="/archives/2016/07/">七月 2016<span class="sidebar_archives-count">11</span></a></li><li><a class="sidebar_archives-link" href="/archives/2016/05/">五月 2016<span class="sidebar_archives-count">6</span></a></li><li><a class="sidebar_archives-link" href="/archives/2016/04/">四月 2016<span class="sidebar_archives-count">9</span></a></li><li><a class="sidebar_archives-link" href="/archives/2016/03/">三月 2016<span class="sidebar_archives-count">8</span></a></li><li><a class="sidebar_archives-link" href="/archives/2016/02/">二月 2016<span class="sidebar_archives-count">2</span></a>
            </ul>
        </li>
        
    

    <!-- Categories  -->
    
        <li class="dropdown">
            <a href="#" class="ripple-effect dropdown-toggle" data-toggle="dropdown">
                
                    <i class="material-icons sidebar-material-icons">chrome_reader_mode</i>
                
                分类
                <b class="caret"></b>
            </a>
            <ul class="dropdown-menu">
                <li>
                <a class="sidebar_archives-link" href="/categories/Android/">Android<span class="sidebar_archives-count">26</span></a></li><li><a class="sidebar_archives-link" href="/categories/Java/">Java<span class="sidebar_archives-count">22</span></a></li><li><a class="sidebar_archives-link" href="/categories/JavaWeb/">JavaWeb<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/categories/Tool/">Tool<span class="sidebar_archives-count">4</span></a></li><li><a class="sidebar_archives-link" href="/categories/UML/">UML<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/categories/设计模式/">设计模式<span class="sidebar_archives-count">2</span></a>
            </ul>
        </li>
        
    

    <!-- Pages  -->
    
        <li>
            <a href="/tags" title="标签">
                
                    <i class="material-icons sidebar-material-icons">bookmark</i>
                
                标签
            </a>
        </li>
        
    

    <!-- Article Number  -->
    
</ul>


        <!-- Sidebar Footer -->
        <!--
I'm glad you use this theme, the development is no so easy, I hope you can keep the copyright, I will thank you so much.
If you still want to delete the copyrights, could you still retain the first one? Which namely "Theme Material"
It will not impact the appearance and can give developers a lot of support :)

很高兴您使用并喜欢该主题，开发不易 十分谢谢与希望您可以保留一下版权声明。
如果您仍然想删除的话 能否只保留第一项呢？即 "Theme Material"
它不会影响美观并可以给开发者很大的支持和动力。 :)
-->

<!-- Sidebar Divider -->

    <div class="sidebar-divider"></div>


<!-- Theme Material -->

    <a href="https://github.com/viosey/hexo-theme-material"  class="sidebar-footer-text-a" target="_blank">
        <div class="sidebar-text mdl-button mdl-js-button mdl-js-ripple-effect sidebar-footer-text-div" data-upgraded=",MaterialButton,MaterialRipple">
            主题 - Material
            <span class="sidebar-badge badge-circle">i</span>
        </div>
    </a>


<!-- Help & Support -->
<!--

-->

<!-- Feedback -->
<!--

-->

<!-- About Theme -->
<!--

-->

    </div>

    <!-- Sidebar Image -->
    

</aside>

                    

                    
                        <!-- Footer Top Button -->
                        <div id="back-to-top" class="toTop-wrap">
    <a href="#top" class="toTop">
        <i class="material-icons footer_top-i">expand_less</i>
    </a>
</div>

                    

                    <!--Footer-->
<footer class="mdl-mini-footer" id="bottom">
    
        <!-- Paradox Footer Left Section -->
        <div class="mdl-mini-footer--left-section sns-list">
    <!-- Twitter -->
    

    <!-- Facebook -->
    

    <!-- Google + -->
    

    <!-- Weibo -->
    

    <!-- Instagram -->
    

    <!-- Tumblr -->
    

    <!-- Github -->
    
        <a href="https://github.com/luoweiguang" target="_blank">
            <button class="mdl-mini-footer--social-btn social-btn footer-sns-github">
                <span class="visuallyhidden">Github</span>
            </button><!--
     --></a>
    

    <!-- LinkedIn -->
    

    <!-- Zhihu -->
    

    <!-- Bilibili -->
    

    <!-- Telegram -->
    
</div>


        <!--Copyright-->
        <div id="copyright">
            Copyright&nbsp;©&nbsp;2016&nbsp;-<script type="text/javascript">var fd = new Date();document.write("&nbsp;" + fd.getFullYear() + "&nbsp;");</script>星家|不会搬砖的码农
        </div>

        <!-- Paradox Footer Right Section -->

        <!--
        I am glad you use this theme, the development is no so easy, I hope you can keep the copyright.
        It will not impact the appearance and can give developers a lot of support :)

        很高兴您使用该主题，开发不易，希望您可以保留一下版权声明。
        它不会影响美观并可以给开发者很大的支持。 :)
        -->

        <div class="mdl-mini-footer--right-section">
            <div>
                <div class="footer-develop-div">Powered by <a href="https://hexo.io" target="_blank" class="footer-develop-a">Hexo</a></div>
                <div class="footer-develop-div">Theme - <a href="https://github.com/viosey/hexo-theme-material" target="_blank" class="footer-develop-a">Material</a></div>
            </div>
        </div>
    
</footer>


                    <!-- Import File -->


    <script>lsloader.load("js/lazyload.min.js","/js/lazyload.min.js?1BcfzuNXqV+ntF6gq+5X3Q==")</script>
    <script>lsloader.load("js/js.min.js","/js/js.min.js?oAl/+lvaqTFV31JXTmbrNA==")</script>



    <script>lsloader.load("js/nprogress.js","/js/nprogress.js?pl3Qhb9lvqR1FlyLUna1Yw==")</script>


<script type="text/ls-javascript" id="NProgress-script">
    NProgress.configure({
        showSpinner: true
    });
    NProgress.start();
    $('#nprogress .bar').css({
        'background': '#29d'
    });
    $('#nprogress .peg').css({
        'box-shadow': '0 0 10px #29d, 0 0 15px #29d'
    });
    $('#nprogress .spinner-icon').css({
        'border-top-color': '#29d',
        'border-left-color': '#29d'
    });
    setTimeout(function() {
        NProgress.done();
        $('.fade').removeClass('out');
    }, 800);
</script>







    <!-- Busuanzi -->
    <script src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script>



   <!-- 使用 DISQUS js 代码 -->






<!-- UC Browser Compatible -->
<script>
	var agent = navigator.userAgent.toLowerCase();
	if(agent.indexOf('ucbrowser')>0) {
		document.write('<link rel="stylesheet" href="/css/uc.css">');
	   alert('由于 UC 浏览器使用极旧的内核，而本网站使用了一些新的特性。\n为了您能更好的浏览，推荐使用 Chrome 或 Firefox 浏览器。');
	}
</script>

<!-- Window Load-->
<script type="text/ls-javascript" id="window-load">
    $(window).on('load', function() {
        // Post_Toc parent position fixed
        $('.post-toc-wrap').parent('.mdl-menu__container').css('position', 'fixed');
    });
</script>

<!-- MathJax Load-->

<script type="text/ls-javascript" id="lazy-load">
    // Offer LazyLoad
    queue.offer(function(){
        $('.lazy').lazyload({
            effect : 'show'
        });
    });

    // Start Queue
    $(document).ready(function(){
        setInterval(function(){
            queue.execNext();
        },200);
    });
</script>

<!-- Bing Background -->


<script>
    (function(){
        var scriptList = document.querySelectorAll('script[type="text/ls-javascript"]')

        for (var i = 0; i < scriptList.length; ++i) {
            var item = scriptList[i];
            lsloader.runInlineScript(item.id,item.id);
        }
    })()
console.log('\n %c © Material Theme | Version: 1.4.0 | https://github.com/viosey/hexo-theme-material %c \n', 'color:#455a64;background:#e0e0e0;padding:5px 0;border-top-left-radius:5px;border-bottom-left-radius:5px;', 'color:#455a64;background:#e0e0e0;padding:5px 0;border-top-right-radius:5px;border-bottom-right-radius:5px;');
</script>

                </main>
            </div>
        </body>
    
</html>
